<div class="container" style="padding: 2rem;">
    <h2>
        <%= editMode ? 'Edit Product' : 'Create New Product' %>
    </h2>

    <form action="<%= editMode ? '/admin/edit/' + product._id : '/admin/add' %>" method="POST"
        style="margin-bottom: 3rem; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <div class="form-group">
            <label>Product Name</label>
            <input type="text" name="name" value="<%= product.name || '' %>" class="form-control" required
                style="width: 100%; padding: 8px; margin-bottom: 10px;">
        </div>
        <div class="form-group">
            <label>Price</label>
            <input type="text" name="price" value="<%= product.price || '' %>" class="form-control" required
                style="width: 100%; padding: 8px; margin-bottom: 10px;">
        </div>
        <div class="form-group">
            <label>Color</label>
            <input type="text" name="color" value="<%= product.color || '' %>" class="form-control"
                style="width: 100%; padding: 8px; margin-bottom: 10px;">
        </div>
        <div class="form-group">
            <label>Department</label>
            <input type="text" name="department" value="<%= product.department || '' %>" class="form-control"
                style="width: 100%; padding: 8px; margin-bottom: 10px;">
        </div>
        <div class="form-group">
            <label>Description</label>
            <textarea name="description" class="form-control" rows="3"
                style="width: 100%; padding: 8px; margin-bottom: 10px;"><%= product.description || '' %></textarea>
        </div>
        <div class="form-group">
            <label>Product Image (URL for now)</label>
            <input type="text" name="image" value="<%= product.image || '' %>" class="form-control"
                placeholder="image.png" style="width: 100%; padding: 8px; margin-bottom: 20px;">
        </div>

        <button type="submit"
            style="background-color: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">
            <%= editMode ? 'Update Product' : 'Create Product' %>
        </button>
        <% if(editMode) { %>
            <a href="/admin" style="margin-left: 10px; color: #666; text-decoration: none;">Cancel</a>
            <% } %>
    </form>

    <hr>

    <h3>Existing Products</h3>
    <table border="1" cellpadding="10" style="width: 100%; border-collapse: collapse; background: #fff;">
        <thead>
            <tr style="background-color: #f8f9fa;">
                <th>Image</th>
                <th>Name</th>
                <th>Price</th>
                <th>Color</th>
                <th>Department</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <% if(products.length> 0) { %>
                <% products.forEach(p=> { %>
                    <tr>
                        <td>
                            <% if(p.image) { %>
                                <img src="<%= p.image.startsWith('http') ? p.image : '/images/' + p.image %>"
                                    alt="Product" style="width: 50px; height: 50px; object-fit: cover;">
                                <% } else { %>
                                    No Image
                                    <% } %>
                        </td>
                        <td>
                            <%= p.name %>
                        </td>
                        <td>
                            <%= p.price %>
                        </td>
                        <td>
                            <%= p.color %>
                        </td>
                        <td>
                            <%= p.department %>
                        </td>
                        <td>
                            <a href="/admin/edit/<%= p._id %>"
                                style="color: blue; text-decoration: underline; margin-right: 10px;">Edit</a>

                            <form action="/admin/delete/<%= p._id %>" method="POST" style="display:inline;"
                                onsubmit="return confirm('Are you sure?');">
                                <button type="submit"
                                    style="color: red; border: none; background: none; cursor: pointer; text-decoration: underline;">Delete</button>
                            </form>
                        </td>
                    </tr>
                    <% }) %>
                        <% } else { %>
                            <tr>
                                <td colspan="6" style="text-align: center;">No products found.</td>
                            </tr>
                            <% } %>
        </tbody>
    </table>
</div>