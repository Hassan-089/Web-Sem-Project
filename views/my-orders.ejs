<div class="container" style="padding: 2rem; max-width: 900px; margin: 0 auto; color: #111;">
    <h2 style="margin-bottom: 2rem; text-align: center;">My Orders</h2>

    <!-- Search Form -->
    <div
        style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 30px; text-align: center;">
        <form action="/my-orders" method="GET"
            style="display: flex; justify-content: center; gap: 10px; flex-wrap: wrap;">
            <input type="email" name="email" placeholder="Enter your email to view history" required
                value="<%= searchedEmail || '' %>"
                style="padding: 10px; width: 300px; border: 1px solid #ddd; border-radius: 4px;">
            <button type="submit"
                style="padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">View
                Orders</button>
        </form>
    </div>

    <% if (searchedEmail) { %>
        <% if (orders.length> 0) { %>
            <div style="display: grid; gap: 20px;">
                <% orders.forEach(order=> { %>
                    <div
                        style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); border-left: 5px solid #28a745;">
                        <div
                            style="display: flex; justify-content: space-between; margin-bottom: 10px; border-bottom: 1px solid #eee; padding-bottom: 10px;">
                            <span style="font-weight: bold; color: #555;">Order #<%= order._id %></span>
                            <span style="color: #888;">
                                <%= new Date(order.createdAt).toLocaleDateString() %>
                            </span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <p style="margin: 0; color: #333;"><strong>Status:</strong>
                                    <%= order.status %>
                                </p>
                                <p style="margin: 5px 0 0; color: #666;">
                                    <%= order.items.length %> items
                                </p>
                            </div>
                            <div style="text-align: right;">
                                <% if(order.discount> 0) { %>
                                    <p style="margin: 0; color: #28a745; font-size: 0.9rem;">Discount: -$<%=
                                            order.discount.toFixed(2) %>
                                    </p>
                                    <% } %>
                                        <p style="margin: 0; font-size: 1.2rem; font-weight: bold; color: #000;">$<%=
                                                order.totalAmount.toFixed(2) %>
                                        </p>
                            </div>
                        </div>
                    </div>
                    <% }) %>
            </div>
            <% } else { %>
                <div style="text-align: center; padding: 3rem; background: #fff; border-radius: 8px;">
                    <p>No orders found for <strong>
                            <%= searchedEmail %>
                        </strong></p>
                </div>
                <% } %>
                    <% } %>
</div>